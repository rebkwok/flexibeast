{% extends "studioadmin/base.html" %}
{% load static %}
{% load bookingtags websitetags %}

{% block studioadmincontent %}

    <div class="container-fluid row">

        <h2>Website Pages</h2>
        <p>Please note you must have one page named "about".  This will be the home page.</p>
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-success">
                    <form class="form-horizontal" method="post" action="">
                    {% csrf_token %}
                    <div class="table-responsive">
                        <table class="table tablesorter" id="sortTable">
                            <thead>
                            <tr class="success">
                                <th>Page name</br><span class="studioadmin-help">Click to edit</span></th>
                                <th>Page heading</th>
                                <th>Menu name</th>
                                <th>Menu location</th>
                                <th>Layout</th>
                                <th>Permission to view</th>
                                <th>Page visible</th>
                                <th>View on site</th>
                                <th class="table-center">Delete page</th>
                            </tr>
                            </thead>
                            <tbody>

                            {{ pages_formset.management_form }}
                            {% for page in pages_formset %}
                                <span class=hide>{{ page.id }}</span>
                                <tr>
                                    <td class="studioadmin-tbl"><a href="{% url 'studioadmin:edit_page' page.instance.name %}">{{ page.instance.name }}</a></td>
                                    <td class="studioadmin-tbl">{{ page.instance.heading }}</td>
                                    <td class="studioadmin-tbl">{{ page.instance.menu_name }}</td>
                                    <td class="studioadmin-tbl">{{ page.instance.menu_location | format_menu }}</td>
                                    <td class="studioadmin-tbl">{{ page.instance.layout | format_layout }}</td>
                                    <td class="studioadmin-tbl">{%  if page.instance.restricted %}<span class="not-confirmed">RESTRICTED</span>{% else %}ALL{% endif %}</td>
                                    <td class="studioadmin-tbl">{%  if page.instance.active %}LIVE{% else %}<span class="not-confirmed">HIDDEN</span>{% endif %}</td>
                                    <td class="studioadmin-tbl table-center"><a href="{% url 'website:page' page.instance.name %}"><span class="fa fa-link"></span></a></td>
                                    <td class="studioadmin-tbl table-center">{{ page.DELETE }}<label for={{ page.DELETE_id }}></label>
                                </tr>
                            {% endfor %}
                            <tr>
                                <td class="studioadmin-tbl" colspan="6"><input class="btn btn-success" name="formset_submitted" type="submit" value="Delete selected pages" /></td>
                            </tr>

                            </tbody>
                        </table>
                    </form>

                    </div>
                </div>
            </div>
         </div>

    </div>

{% endblock studioadmincontent %}
